<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/docker/prod/Dockerfile.front">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/docker/prod/Dockerfile.front" />
              <option name="originalContent" value="# Stage 1: Build&#10;FROM node:18-alpine as builder&#10;&#10;WORKDIR /app&#10;&#10;# Copie package.json et package-lock.json&#10;COPY front/package*.json ./&#10;&#10;# Installation des dépendances&#10;RUN npm ci&#10;&#10;# Copie du code source&#10;COPY front/ ./&#10;&#10;# Build de production&#10;RUN npm run build&#10;&#10;# Stage 2: Production&#10;FROM node:18-alpine&#10;&#10;WORKDIR /app&#10;&#10;# Installation des dépendances de production&#10;COPY front/package*.json ./&#10;RUN npm ci --omit=dev&#10;&#10;# Copie des fichiers de build&#10;COPY --from=builder /app/dist ./dist&#10;&#10;# Copie du serveur&#10;COPY front/server.cjs ./&#10;&#10;EXPOSE 80&#10;&#10;CMD [&quot;node&quot;, &quot;server.cjs&quot;]&#10;" />
              <option name="updatedContent" value="# Stage 1: Build&#10;FROM node:18-alpine as builder&#10;&#10;WORKDIR /app&#10;&#10;# Permet d'injecter l'URL du scraper au build Vite&#10;ARG VITE_SCRAPER_API_URL&#10;ENV VITE_SCRAPER_API_URL=${VITE_SCRAPER_API_URL}&#10;&#10;# Copie package.json et package-lock.json&#10;COPY front/package*.json ./&#10;&#10;# Installation des dépendances&#10;RUN npm ci&#10;&#10;# Copie du code source&#10;COPY front/ ./&#10;&#10;# Build de production&#10;RUN npm run build&#10;&#10;# Stage 2: Production&#10;FROM node:18-alpine&#10;&#10;WORKDIR /app&#10;&#10;# Expose aussi la variable au runtime (utile pour logs/server)&#10;ARG VITE_SCRAPER_API_URL&#10;ENV VITE_SCRAPER_API_URL=${VITE_SCRAPER_API_URL}&#10;&#10;# Installation des dépendances de production&#10;COPY front/package*.json ./&#10;RUN npm ci --omit=dev&#10;&#10;# Copie des fichiers de build&#10;COPY --from=builder /app/dist ./dist&#10;&#10;# Copie du serveur&#10;COPY front/server.cjs ./&#10;&#10;EXPOSE 80&#10;&#10;CMD [&quot;node&quot;, &quot;server.cjs&quot;]" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>